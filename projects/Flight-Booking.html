<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SkyTrip – Flight Booking</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/daisyui@4.6.0/dist/full.min.css" rel="stylesheet"/>

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: { brand: "#1a73e8" }
    }
  }
}
</script>
</head>

<body class="bg-gradient-to-br from-blue-100 via-white to-indigo-100 min-h-screen">

<!-- NAVBAR -->
<nav class="bg-white shadow sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
    <h1 class="text-2xl font-bold text-brand">SkyTrip</h1>
    <div class="flex gap-3">
      <button id="homeBtn" class="btn btn-sm btn-ghost">Home</button>
      <button id="adminBtn" class="btn btn-sm btn-outline">Admin</button>
    </div>
  </div>
</nav>

<!-- USER SECTION -->
<section id="userSection">
  <div class="max-w-7xl mx-auto px-6 py-12">
    <h2 class="text-3xl font-bold mb-6">Search Flights</h2>

    <div class="bg-white rounded-2xl shadow-xl p-6 grid md:grid-cols-4 gap-4">
      <select id="fromCity" class="select select-bordered">
        <option value="">From</option>
        <option>Delhi</option>
        <option>Mumbai</option>
        <option>Bangalore</option>
      </select>

      <select id="toCity" class="select select-bordered">
        <option value="">To</option>
        <option>Delhi</option>
        <option>Mumbai</option>
        <option>Bangalore</option>
      </select>

      <input type="date" id="travelDate" class="input input-bordered"/>

      <button id="searchBtn" class="btn btn-primary">Search</button>
    </div>

    <div id="flightResults" class="space-y-4 mt-10"></div>
  </div>
</section>

<!-- ADMIN LOGIN -->
<section id="adminLoginSection" class="hidden max-w-md mx-auto px-6 py-20">
  <div class="bg-white p-8 rounded-2xl shadow-xl">
    <h2 class="text-2xl font-bold mb-6">Admin Login</h2>
    <input id="adminUser" class="input input-bordered w-full mb-4" placeholder="Username">
    <input id="adminPass" type="password" class="input input-bordered w-full mb-4" placeholder="Password">
    <button id="adminLoginBtn" class="btn btn-primary w-full">Login</button>
  </div>
</section>

<!-- ADMIN PANEL -->
<section id="adminPanelSection" class="hidden max-w-7xl mx-auto px-6 py-12">
  <h2 class="text-3xl font-bold mb-6">Admin Dashboard</h2>

  <div class="bg-white rounded-2xl shadow-xl p-6 mb-10">
    <h3 class="font-bold text-lg mb-4">Add Flight</h3>

    <div class="grid md:grid-cols-5 gap-4">
      <input id="airline" class="input input-bordered" placeholder="Airline">
      <input id="from" class="input input-bordered" placeholder="From">
      <input id="to" class="input input-bordered" placeholder="To">
      <input id="time" class="input input-bordered" placeholder="Time">
      <input id="price" type="number" class="input input-bordered" placeholder="Price">
    </div>

    <button id="addFlightBtn" class="btn btn-primary mt-4">Add Flight</button>
  </div>

  <div class="bg-white rounded-2xl shadow-xl p-6">
    <h3 class="font-bold text-lg mb-4">All Flights</h3>
    <div id="adminFlights" class="space-y-3"></div>
  </div>
</section>

<script>
/* ---------- DOM ---------- */
const userSection = document.getElementById("userSection");
const adminLoginSection = document.getElementById("adminLoginSection");
const adminPanelSection = document.getElementById("adminPanelSection");
const flightResults = document.getElementById("flightResults");
const adminFlights = document.getElementById("adminFlights");

/* ---------- DATA ---------- */
let flights = JSON.parse(localStorage.getItem("flights")) || [
  { airline:"IndiGo", from:"Delhi", to:"Mumbai", time:"06:30 - 08:45", price:4200 }
];

function saveFlights(){
  localStorage.setItem("flights", JSON.stringify(flights));
}

/* ---------- VIEW CONTROL ---------- */
function show(section){
  userSection.classList.add("hidden");
  adminLoginSection.classList.add("hidden");
  adminPanelSection.classList.add("hidden");
  section.classList.remove("hidden");
}

/* ---------- USER ---------- */
document.getElementById("searchBtn").onclick = () => {
  const from = fromCity.value;
  const to = toCity.value;

  flightResults.innerHTML = "";

  if(!from || !to){
    flightResults.innerHTML = `<p class="text-red-500">Please select cities</p>`;
    return;
  }

  flights
    .filter(f => f.from === from && f.to === to)
    .forEach(f => {
      flightResults.innerHTML += `
        <div class="bg-white rounded-xl shadow p-6 flex justify-between">
          <div>
            <p class="font-bold">${f.airline}</p>
            <p class="text-gray-500">${f.from} → ${f.to}</p>
            <p class="text-gray-400 text-sm">${f.time}</p>
          </div>
          <div class="text-right">
            <p class="text-xl font-bold text-brand">₹${f.price}</p>
            <button class="btn btn-sm btn-primary mt-2">Book</button>
          </div>
        </div>`;
    });
};

/* ---------- ADMIN ---------- */
document.getElementById("adminBtn").onclick = () => show(adminLoginSection);
document.getElementById("homeBtn").onclick = () => show(userSection);

document.getElementById("adminLoginBtn").onclick = () => {
  if(adminUser.value === "admin" && adminPass.value === "admin123"){
    show(adminPanelSection);
    renderAdminFlights();
  } else {
    alert("Invalid admin credentials");
  }
};

document.getElementById("addFlightBtn").onclick = () => {
  if(!airline.value || !from.value || !to.value || !price.value){
    alert("Fill all fields");
    return;
  }

  flights.push({
    airline: airline.value,
    from: from.value,
    to: to.value,
    time: time.value,
    price: Number(price.value)
  });

  saveFlights();
  renderAdminFlights();
  alert("Flight added successfully");
};

function renderAdminFlights(){
  adminFlights.innerHTML = "";
  flights.forEach((f,i)=>{
    adminFlights.innerHTML += `
      <div class="flex justify-between border p-3 rounded">
        <span>${f.airline} | ${f.from} → ${f.to} | ₹${f.price}</span>
        <button class="btn btn-xs btn-error" onclick="deleteFlight(${i})">Delete</button>
      </div>`;
  });
}

function deleteFlight(i){
  flights.splice(i,1);
  saveFlights();
  renderAdminFlights();
}
</script>

</body>
</html>
